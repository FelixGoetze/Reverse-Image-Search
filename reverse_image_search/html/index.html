<!DOCTYPE html>
<!-- adapted from https://css-tricks.com/a-lightweight-masonry-solution/ -->

<head>
  <style>
    /* basic reset */
    * {
      margin: 0;
    }

    .day {
      background: #eee;
      color: black;
    }

    .night {
      background: #333;
      color: white;
    }

    html {
      background: white;
    }

    /* @media (prefers-color-scheme: dark) {
      html {
        background: #555
      }
    } */

    /* masonry grid styles */
    .grid--masonry {
      display: grid;
      grid-template-columns: repeat(auto-fit, min(25em, 100%));
      grid-template-rows: masonry;
      justify-content: center;
      grid-gap: 0.5em;
      padding: 0.5em;
    }

    .grid--masonry>* {
      align-self: start;
    }

    img {
      display: block;
      width: 100%;
      border-radius: 4px;
      box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.7);
      /* filter: sepia(1); */
    }
  </style>
</head>


<body>
  <section class='grid--masonry'>
    
    <a href="https://unsplash.com/photos/_Loex_Sg5E8">
      <img src="https://source.unsplash.com/_Loex_Sg5E8" alt="">
    </a>
    
    <a href="https://unsplash.com/photos/eD4yasDAyTM">
      <img src="https://source.unsplash.com/eD4yasDAyTM" alt="">
    </a>
    
    <a href="https://unsplash.com/photos/rdrT6TluU9U">
      <img src="https://source.unsplash.com/rdrT6TluU9U" alt="">
    </a>
    
    <a href="https://unsplash.com/photos/Ql3ULtlplsQ">
      <img src="https://source.unsplash.com/Ql3ULtlplsQ" alt="">
    </a>
    
    <a href="https://unsplash.com/photos/j93d5NMmmjc">
      <img src="https://source.unsplash.com/j93d5NMmmjc" alt="">
    </a>
    
    <a href="https://unsplash.com/photos/UMlT0bviaek">
      <img src="https://source.unsplash.com/UMlT0bviaek" alt="">
    </a>
    
    <a href="https://unsplash.com/photos/XjdYA6CwY-A">
      <img src="https://source.unsplash.com/XjdYA6CwY-A" alt="">
    </a>
    
    <a href="https://unsplash.com/photos/3cUDZ6kEJW4">
      <img src="https://source.unsplash.com/3cUDZ6kEJW4" alt="">
    </a>
    
    <a href="https://unsplash.com/photos/MveszMsEbwc">
      <img src="https://source.unsplash.com/MveszMsEbwc" alt="">
    </a>
    
    <a href="https://unsplash.com/photos/KlO-YcZ1YTg">
      <img src="https://source.unsplash.com/KlO-YcZ1YTg" alt="">
    </a>
    
  </section>

  <script>
    let grids = [...document.querySelectorAll('.grid--masonry')];

    if (grids.length && getComputedStyle(grids[0]).gridTemplateRows !== 'masonry') {
      grids = grids.map(grid => ({
        _el: grid,
        gap: parseFloat(getComputedStyle(grid).gridRowGap),
        items: [...grid.childNodes].filter(c => c.nodeType === 1),
        ncol: 0
      }));


      function layout() {
        grids.forEach(grid => {
          /* get the post relayout number of columns */
          let ncol = getComputedStyle(grid._el).gridTemplateColumns.split(' ').length;

          /* if the number of columns has changed */
          if (grid.ncol !== ncol) {
            /* update number of columns */
            grid.ncol = ncol;

            /* revert to initial positioning, no margin */
            grid.items.forEach(c => c.style.removeProperty('margin-top'));

            /* if we have more than one column */
            if (grid.ncol > 1) {
              grid.items.slice(ncol).forEach((c, i) => {
                let prev_fin = grid.items[i].getBoundingClientRect().bottom /* bottom edge of item above */,
                  curr_ini = c.getBoundingClientRect().top /* top edge of current item */;

                c.style.marginTop = `${prev_fin + grid.gap - curr_ini}px`;
              });
            }
          }
        });
      }

      addEventListener('load', e => {
        layout(); /* initial load */
        addEventListener('resize', layout, false); /* on resize */
      }, false);
    }
  </script>
</body>